<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>CyberShield PRO – Plataforma Unificada</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Fonts e Ícones -->
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Orbitron:wght@500&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- zxcvbn para análise de força de senha -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/zxcvbn/4.4.2/zxcvbn.js"></script>

  <style>
    /********************************************************************
     *                       VARIÁVEIS DE COR E TEMA                    *
     ********************************************************************/
    :root {
      /* Fundo principal */
      --bg-dark: #0a0a0a;
      --bg-light: #f0f0f0;

      /* Cores neon para um visual “hiper chamativo” */
      --neon-pink: #ff00ff;    /* Rosa neon */
      --neon-cyan: #00ffff;    /* Ciano neon */
      --neon-green: #00ff4c;   /* Verde neon */
      --neon-yellow: #ffd300;  /* Amarelo neon */
      --alert-red: #ff073a;    /* Alerta vermelho */

      /* Textos e sombras */
      --text-dark: #333;
      --text-light: #fff;

      /* Outros */
      --transition-speed: 0.3s;
    }

    /********************************************************************
     *                      ESTILOS BÁSICOS/RESET                       *
     ********************************************************************/
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Roboto', sans-serif;
      background: var(--bg-dark);
      color: var(--neon-cyan);
      overflow-x: hidden;
      min-height: 100vh;
      transition: background var(--transition-speed), color var(--transition-speed);
      padding-top: 70px; /* espaço para a nav fixa */
    }
    body.light-mode {
      background: var(--bg-light);
      color: var(--text-dark);
    }

    /********************************************************************
     *                    BARRA SUPERIOR (NAV FIXA)                     *
     ********************************************************************/
    .top-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 70px;
      background: linear-gradient(135deg, var(--neon-pink), var(--neon-cyan));
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 1rem;
      z-index: 9999;
      box-shadow: 0 0 20px rgba(255, 0, 255, 0.4);
    }

    .nav-brand {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5rem;
      color: #fff;
      text-transform: uppercase;
      letter-spacing: 1px;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.6);
    }

    .nav-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    /* Botão Dark/Light Mode dentro da barra */
    #darkmodebtn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      padding: 0;
      font-size: 20px;
      border: none;
      background: #111;
      color: #fff;
      cursor: pointer;
      box-shadow: 0 0 10px #fff;
      transition: background var(--transition-speed), transform var(--transition-speed);
    }
    #darkmodebtn:hover {
      transform: scale(1.1);
      background: #333;
    }
    body.light-mode #darkmodebtn {
      background: #ccc;
      color: #000;
      box-shadow: 0 0 5px #999;
    }

    /* Seletor de Idioma dentro da barra */
    #language-selector {
      height: 40px;
      background: #111;
      color: #fff;
      border: none;
      padding: 0 0.5rem;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 0 10px #fff;
      transition: background var(--transition-speed), transform var(--transition-speed);
    }
    #language-selector:hover {
      transform: scale(1.05);
      background: #333;
    }
    body.light-mode #language-selector {
      background: #ccc;
      color: #000;
      box-shadow: 0 0 5px #999;
    }

    /********************************************************************
     *                       FUNDO “MATRIX”                             *
     ********************************************************************/
    .matrix-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -10;
      opacity: 0.07;
      background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0, 255, 0, 0.2) 3px
      );
    }

    /********************************************************************
     *                       SEÇÕES E CONTAINERS                        *
     ********************************************************************/
    .container {
      width: 90%;
      max-width: 1400px;
      margin: 0 auto;
      position: relative;
      margin-bottom: 2rem;
    }

    /* Box com a borda glitch */
    .cyber-border {
      position: relative;
      border: 2px solid var(--neon-pink);
      box-shadow: 0 0 15px var(--neon-pink);
      border-radius: 8px;
      padding: 2rem;
      margin: 2rem 0;
      overflow: hidden;
    }
    .cyber-border::before {
      content: '';
      position: absolute;
      top: -5px;
      left: -5px;
      right: -5px;
      bottom: -5px;
      border: 2px solid var(--neon-cyan);
      border-radius: 8px;
      z-index: -1;
      animation: glitch 2s infinite;
    }
    @keyframes glitch {
      0% { opacity: 0.3; }
      50% { opacity: 0.8; transform: skew(2deg); }
      100% { opacity: 0.3; }
    }

    /********************************************************************
     *                ALERTA (CYBERWATCH) & ESTATÍSTICAS                *
     ********************************************************************/
    .alert-banner {
      background: rgba(255, 71, 71, 0.2);
      color: var(--alert-red);
      padding: 1rem;
      text-align: center;
      border: 1px solid var(--alert-red);
      border-radius: 8px;
      margin: 1rem 0;
      animation: pulse 2s infinite;
      font-weight: bold;
      font-family: 'Roboto', sans-serif;
    }
    @keyframes pulse {
      0%   { opacity: 0.8; }
      50%  { opacity: 1;   }
      100% { opacity: 0.8; }
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .stats-card {
      background: #111;
      padding: 1.5rem;
      border-radius: 10px;
      border: 1px solid #2d3748;
      box-shadow: 0 4px 6px rgba(0,0,0,0.5);
      transition: transform 0.3s ease;
      text-align: center;
    }
    .stats-card:hover {
      transform: translateY(-5px);
    }
    .card-title {
      color: var(--neon-yellow);
      margin-bottom: 1rem;
      font-size: 1rem;
      font-family: 'Orbitron', sans-serif;
    }
    .card-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--neon-green);
      text-shadow: 0 0 8px rgba(0, 255, 0, 0.3);
    }

    /********************************************************************
     *               MAPA DE ATAQUES (DIGITAL ATTACK MAP)               *
     ********************************************************************/
    .map-container {
      position: relative;
      width: 100%;
      padding-top: 56.25%; /* 16:9 */
      margin-top: 2rem;
      border-radius: 10px;
      overflow: hidden;
      background: #111;
      border: 1px solid #2d3748;
      box-shadow: 0 8px 20px rgba(0,0,0,0.6);
    }
    .map-iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }

    .section-title {
      font-family: 'Orbitron', sans-serif;
      text-transform: uppercase;
      font-size: 1.6rem;
      margin-top: 2rem;
      margin-bottom: 1rem;
      text-align: center;
      color: var(--neon-pink);
    }

    /********************************************************************
     *                       TOOLKIT DE SEGURANÇA                       *
     ********************************************************************/
    .tools-wrapper {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
    }
    .tool-section {
      flex: 1 1 320px;
      background: #111;
      padding: 1.5rem;
      border-radius: 1rem;
      position: relative;
      overflow: hidden;
      border: 1px solid #2d3748;
      box-shadow: 0 4px 6px rgba(0,0,0,0.5);
      transition: transform 0.3s ease;
      margin-bottom: 1.5rem;
    }
    .tool-section:hover {
      transform: translateY(-5px);
    }
    .tool-section h2 {
      color: var(--neon-pink);
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }
    .form-group {
      margin-bottom: 1.2rem;
    }
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: var(--neon-cyan);
      font-family: 'Roboto', sans-serif;
    }
    input[type="text"],
    input[type="number"],
    select,
    textarea {
      width: 100%;
      padding: 0.8rem;
      border: 2px solid #333;
      border-radius: 0.8rem;
      font-size: 1rem;
      background: #222;
      color: #fff;
      transition: border-color var(--transition-speed);
      font-family: 'Roboto', sans-serif;
    }
    input:focus,
    select:focus,
    textarea:focus {
      border-color: var(--neon-green);
      outline: none;
      box-shadow: 0 0 0 3px rgba(0,255,0,0.2);
    }

    .options-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 0.8rem;
      margin: 1rem 0;
    }
    .option-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: #222;
      border-radius: 0.6rem;
      border: 1px solid #444;
      transition: background var(--transition-speed);
      padding: 0.5rem;
    }
    .option-item:hover {
      background: #333;
    }

    .btn-primary,
    .btn-secondary {
      display: inline-block;
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, background 0.2s;
      margin-bottom: 0.8rem;
      font-family: 'Orbitron', sans-serif;
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--neon-pink), var(--neon-cyan));
      color: #000;
    }
    .btn-primary:hover {
      transform: scale(1.05);
    }
    .btn-secondary {
      background: #333;
      color: #fff;
    }
    .btn-secondary:hover {
      background: #444;
      transform: scale(1.03);
    }

    .button-group {
      display: flex;
      gap: 0.8rem;
    }

    .result-box {
      display: flex;
      gap: 0.5rem;
      background: #222;
      border-radius: 0.8rem;
      border: 2px solid #333;
      padding: 0.5rem;
      align-items: center;
    }
    .result-box input {
      border: none;
      background: transparent;
      flex: 1;
      padding: 0.8rem;
      color: #fff;
      font-family: 'Roboto', sans-serif;
    }
    .btn-icon {
      padding: 0.6rem;
      border: none;
      background: none;
      cursor: pointer;
      font-size: 1.2rem;
      opacity: 0.8;
      color: var(--neon-green);
      transition: opacity 0.3s;
    }
    .btn-icon:hover {
      opacity: 1;
    }
    .key-box {
      height: 80px;
      resize: vertical;
    }

    /* Analisador de senha */
    .analysis-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin: 1rem 0;
      align-items: center;
      justify-content: space-between;
    }
    .time-unit-group label {
      margin-bottom: 0.3rem;
      color: var(--neon-cyan);
      font-family: 'Roboto', sans-serif;
    }
    .loading-indicator {
      display: none;
      align-items: center;
      gap: 0.8rem;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .loading-indicator.active {
      display: flex;
      opacity: 1;
    }
    .progress-bar {
      width: 100px;
      height: 8px;
      background: #444;
      border-radius: 4px;
      overflow: hidden;
      position: relative;
    }
    .progress-bar::after {
      content: '';
      position: absolute;
      left: 0;
      width: 0%;
      height: 100%;
      background: var(--neon-green);
      transition: width 0.5s ease;
    }

    .time-display {
      text-align: center;
      margin: 1rem 0;
    }
    .complexity-info {
      color: #aaa;
      font-size: 0.9rem;
      font-family: 'Roboto', sans-serif;
    }
    .strength-container {
      width: 100%;
      background: #333;
      border-radius: 0.5rem;
      overflow: hidden;
      height: 20px;
      margin-top: 0.5rem;
    }
    .strength-bar {
      height: 100%;
      width: 0%;
      background: var(--neon-green);
      transition: width 0.5s ease;
    }
    #strength-label {
      display: block;
      text-align: center;
      margin-top: 0.5rem;
      font-weight: bold;
      font-family: 'Roboto', sans-serif;
    }

    /* Histórico */
    #history-container {
      background: #111;
      padding: 1rem 1.5rem;
      border-radius: 1rem;
      border: 1px solid #333;
      box-shadow: 0 4px 6px rgba(0,0,0,0.5);
      margin-top: 2rem;
    }
    #history-container h2 {
      color: var(--neon-pink);
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 1rem;
      font-size: 1.1rem;
      text-transform: uppercase;
    }
    #history-container div {
      margin-bottom: 0.5rem;
      color: #ddd;
      font-family: 'Roboto', sans-serif;
    }

    /********************************************************************
     *                 ALERTAS GERAIS (TOOLKIT)                         *
     ********************************************************************/
    #alert-container {
      position: fixed;
      top: 80px;
      right: 20px;
      z-index: 9999;
    }
    .alert {
      padding: 1rem 1.5rem;
      border-radius: 0.5rem;
      margin-bottom: 0.5rem;
      color: #fff;
      opacity: 0;
      animation: fadeInAlert 0.5s forwards, fadeOutAlert 0.5s forwards 2.5s;
      font-family: 'Roboto', sans-serif;
    }
    .alert.success {
      background: #28a745;
    }
    .alert.error {
      background: #dc3545;
    }
    @keyframes fadeInAlert {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    @keyframes fadeOutAlert {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    /********************************************************************
     *                             RODAPÉ                              *
     ********************************************************************/
    footer {
      width: 100%;
      text-align: center;
      padding: 1rem;
      margin-top: 2rem;
      border-top: 2px solid var(--neon-pink);
      color: var(--neon-cyan);
    }
    footer a {
      color: var(--neon-green);
      text-decoration: none;
      margin: 0 0.5rem;
      font-family: 'Orbitron', sans-serif;
    }
    footer a:hover {
      text-shadow: 0 0 5px var(--neon-green);
    }

    /********************************************************************
     *                      MODO CLARO (OVERRIDES)                      *
     ********************************************************************/
    body.light-mode .top-bar {
      background: linear-gradient(135deg, #aaa, #ddd);
      box-shadow: none;
    }
    body.light-mode .nav-brand {
      color: #000;
      text-shadow: none;
    }
    body.light-mode .cyber-border {
      border-color: #ccc;
      box-shadow: none;
    }
    body.light-mode .cyber-border::before {
      border-color: #999;
    }
    body.light-mode .alert-banner {
      background: #ffeaea;
      color: red;
    }
    body.light-mode .stats-card {
      background: #eee;
    }
    body.light-mode .map-container {
      background: #ddd;
    }
    body.light-mode .tool-section {
      background: #eee;
    }
    body.light-mode #history-container {
      background: #ddd;
    }
    body.light-mode footer {
      border-top: 2px solid #999;
      color: #000;
    }
  </style>
</head>
<body id="body">
  <!-- Fundo estilo Matrix -->
  <div class="matrix-bg"></div>

  <!-- BARRA SUPERIOR (NAV) -->
  <nav class="top-bar">
    <div class="nav-brand">
      CyberShield PRO
    </div>
    <div class="nav-actions">
      <!-- Botão de Dark/Light Mode -->
      <button id="darkmodebtn" data-i18n-title="toggleTheme">🌙</button>
      <!-- Seletor de idioma -->
      <select id="language-selector" title="Selecionar Idioma">
        <option value="pt">Português</option>
        <option value="en">English</option>
      </select>
    </div>
  </nav>

  <!-- CONTAINER PRINCIPAL PARA CONTEÚDO -->
  <div class="container">
    <!-- Caixa com borda glitch para envolver a seção do CyberWatch -->
    <div class="cyber-border">
      <!-- Alerta CyberWatch -->
      <div class="alert-banner" id="cyberwatch-alert">
        <i class="fas fa-exclamation-triangle"></i>
        <span id="cyberwatch-alert-text">Nível de Alerta Elevado: 1.234 ataques detectados nas últimas 24 horas</span>
      </div>

      <!-- Estatísticas (Dashboard) -->
      <div class="dashboard-grid" id="cyberwatch-stats">
        <div class="stats-card">
          <h3 class="card-title"><i class="fas fa-bolt"></i> Ataques Ativos</h3>
          <div class="card-value" id="active-attacks">328</div>
        </div>
        <div class="stats-card">
          <h3 class="card-title"><i class="fas fa-globe"></i> Países Afetados</h3>
          <div class="card-value" id="affected-countries">78</div>
        </div>
        <div class="stats-card">
          <h3 class="card-title"><i class="fas fa-clock"></i> Última Atualização</h3>
          <div class="card-value" id="last-update">12s</div>
        </div>
      </div>

      <!-- Mapa de Ataques -->
      <h2 class="section-title" data-i18n="cyberMapTitle">Mapa de Ataques em Tempo Real</h2>
      <div class="map-container">
        <iframe class="map-iframe"
                src="https://www.digitalattackmap.com/embed/#/map"
                title="Mapa de Ataques em Tempo Real"></iframe>
      </div>
    </div>

    <!-- Caixa com borda glitch para o Toolkit -->
    <div class="cyber-border">
      <!-- Toolkit de Segurança -->
      <div class="tools-wrapper">
        <!-- Gerador de Senhas -->
        <section class="tool-section" id="password-generator">
          <h2 data-i18n="passwordGenTitle">🔒 Gerador de Senhas</h2>
          <div class="form-group">
            <label for="length" data-i18n="passwordLengthLabel">Tamanho da Senha</label>
            <input type="number" id="length" min="4" max="128" value="12" aria-label="Defina o tamanho da senha">
          </div>
          <div class="options-grid">
            <div class="option-item">
              <input type="checkbox" id="include-lowercase" checked>
              <label for="include-lowercase" data-i18n="lowercaseLabel">Minúsculas (a-z)</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="include-uppercase" checked>
              <label for="include-uppercase" data-i18n="uppercaseLabel">Maiúsculas (A-Z)</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="include-numbers" checked>
              <label for="include-numbers" data-i18n="numbersLabel">Números (0-9)</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="include-symbols">
              <label for="include-symbols" data-i18n="symbolsLabel">Símbolos (!@#$%)</label>
            </div>
          </div>
          <button class="btn-primary" id="generate-btn" data-i18n="generatePasswordBtn">Gerar Senha</button>
          <button class="btn-secondary" id="clear-password-btn" title="Limpar senha gerada" data-i18n="clearBtn">Limpar</button>
          <div class="result-box">
            <input type="text" id="generated-password" readonly aria-label="Senha gerada">
            <button class="btn-icon" id="copy-btn" title="Copiar senha">📋</button>
          </div>
        </section>

        <!-- Criptografia/Descriptografia -->
        <section class="tool-section" id="encryption-tool">
          <h2 data-i18n="encryptionTitle">🔑 Criptografia de Texto</h2>
          <div class="form-group">
            <label for="text-to-encrypt" data-i18n="inputTextLabel">Texto de Entrada</label>
            <input type="text" id="text-to-encrypt" placeholder="Digite o texto para encriptar/desencriptar">
          </div>
          <div class="form-group">
            <label for="encryption-type" data-i18n="encryptionTypeLabel">Tipo de Criptografia</label>
            <select id="encryption-type">
              <option value="aes" data-i18n="aesOption">AES (Simétrica)</option>
              <option value="sha256" data-i18n="sha256Option">SHA-256 (Hash)</option>
              <option value="hybrid" data-i18n="hybridOption">Hybrid (RSA + AES)</option>
            </select>
          </div>
          <!-- RSA keys se "hybrid" for escolhido -->
          <div id="rsa-keys-section" style="display: none;">
            <div class="form-group">
              <button class="btn-secondary" id="generate-rsa-keys" data-i18n="generateRSAKeysBtn">Gerar Par de Chaves RSA</button>
            </div>
            <div class="form-group">
              <label data-i18n="publicKeyLabel">Chave Pública</label>
              <textarea id="rsa-public-key" class="key-box" readonly></textarea>
            </div>
            <div class="form-group">
              <label data-i18n="privateKeyLabel">Chave Privada</label>
              <textarea id="rsa-private-key" class="key-box" readonly></textarea>
            </div>
          </div>
          <div class="form-group" id="key-input-group">
            <label for="encryption-key" data-i18n="encryptionKeyLabel">Chave de Criptografia</label>
            <input type="text" id="encryption-key" placeholder="Digite a chave secreta">
          </div>
          <div class="button-group">
            <button class="btn-secondary" id="encrypt-btn" data-i18n="encryptBtn">Encriptar</button>
            <button class="btn-secondary" id="decrypt-btn" data-i18n="decryptBtn">Desencriptar</button>
          </div>
          <button class="btn-secondary" id="clear-crypto-btn" data-i18n="clearBtn">Limpar</button>
          <div class="result-box">
            <input type="text" id="encrypted-decrypted-text" readonly>
            <button class="btn-icon" id="copy-encrypted-btn" title="Copiar resultado">📋</button>
          </div>
        </section>

        <!-- Analisador de Força de Senha -->
        <section class="tool-section" id="password-analyzer">
          <h2 data-i18n="analyzerTitle">🔍 Analisador de Força de Senha</h2>
          <div class="form-group">
            <label for="password-input" data-i18n="analyzerInputLabel">Digite a Senha para Analisar</label>
            <input type="text" id="password-input" placeholder="Digite sua senha">
          </div>
          <div class="analysis-controls">
            <div class="time-unit-group">
              <label for="time-unit" data-i18n="timeUnitLabel">Unidade de tempo:</label>
              <select id="time-unit">
                <option value="years" data-i18n="yearsOption">Anos</option>
                <option value="months" data-i18n="monthsOption">Meses</option>
                <option value="days" data-i18n="daysOption">Dias</option>
              </select>
            </div>
            <div class="loading-indicator" id="loading-indicator">
              <div class="progress-bar"></div>
              <span data-i18n="calculating">Calculando...</span>
            </div>
          </div>
          <div class="time-display">
            <p id="time-estimate-analyzer">Tempo estimado para quebrar sua senha:</p>
            <p class="complexity-info" data-i18n="complexityInfo">
              Esta estimativa utiliza métodos realistas de quebra.
            </p>
          </div>
          <!-- Barra de Força -->
          <div class="form-group">
            <label data-i18n="passwordStrengthLabel">Força da Senha:</label>
            <div class="strength-container">
              <div class="strength-bar" id="strength-bar"></div>
            </div>
            <span id="strength-label"></span>
          </div>
          <button class="btn-secondary" id="clear-analyzer-btn" data-i18n="clearBtn">Limpar</button>
        </section>
      </div>

      <!-- Histórico de Operações -->
      <div id="history-container">
        <h2 data-i18n="historyTitle">Histórico de Operações</h2>
        <button class="btn-secondary" id="clear-history-btn" data-i18n="clearHistoryBtn">Limpar Histórico</button>
        <!-- Itens do histórico serão adicionados dinamicamente -->
      </div>
    </div>
  </div>

  <!-- Container para alertas gerais do Toolkit -->
  <div id="alert-container"></div>

  <!-- Rodapé -->
  <footer>
    <p id="footerText">&copy; 2025 CyberShield PRO. Todos os direitos reservados.</p>
    <p>
      <a href="#" target="_blank" title="GitHub">GitHub</a>|
      <a href="#" target="_blank" title="Twitter">Twitter</a>|
      <a href="#" target="_blank" title="Contato">Contato</a>
    </p>
  </footer>

  <!-- SCRIPTS COMBINADOS -->
  <script>
    /************************************************************
     *                    TRADUÇÕES (PT E EN)                   *
     ************************************************************/
    const translations = {
      pt: {
        toggleTheme: "Alternar tema",
        passwordGenTitle: "🔒 Gerador de Senhas",
        passwordLengthLabel: "Tamanho da Senha",
        lowercaseLabel: "Minúsculas (a-z)",
        uppercaseLabel: "Maiúsculas (A-Z)",
        numbersLabel: "Números (0-9)",
        symbolsLabel: "Símbolos (!@#$%)",
        generatePasswordBtn: "Gerar Senha",
        clearBtn: "Limpar",
        encryptionTitle: "🔑 Criptografia de Texto",
        inputTextLabel: "Texto de Entrada",
        encryptionTypeLabel: "Tipo de Criptografia",
        aesOption: "AES (Simétrica)",
        sha256Option: "SHA-256 (Hash)",
        hybridOption: "Hybrid (RSA + AES)",
        generateRSAKeysBtn: "Gerar Par de Chaves RSA",
        publicKeyLabel: "Chave Pública",
        privateKeyLabel: "Chave Privada",
        encryptionKeyLabel: "Chave de Criptografia",
        encryptBtn: "Encriptar",
        decryptBtn: "Desencriptar",
        analyzerTitle: "🔍 Analisador de Força de Senha",
        analyzerInputLabel: "Digite a Senha para Analisar",
        timeUnitLabel: "Unidade de tempo:",
        yearsOption: "Anos",
        monthsOption: "Meses",
        daysOption: "Dias",
        calculating: "Calculando...",
        complexityInfo: "Esta estimativa utiliza métodos realistas de quebra.",
        passwordStrengthLabel: "Força da Senha:",
        historyTitle: "Histórico de Operações",
        clearHistoryBtn: "Limpar Histórico",
        cyberMapTitle: "Mapa de Ataques em Tempo Real"
      },
      en: {
        toggleTheme: "Toggle Theme",
        passwordGenTitle: "🔒 Password Generator",
        passwordLengthLabel: "Password Length",
        lowercaseLabel: "Lowercase (a-z)",
        uppercaseLabel: "Uppercase (A-Z)",
        numbersLabel: "Numbers (0-9)",
        symbolsLabel: "Symbols (!@#$%)",
        generatePasswordBtn: "Generate Password",
        clearBtn: "Clear",
        encryptionTitle: "🔑 Text Encryption",
        inputTextLabel: "Input Text",
        encryptionTypeLabel: "Encryption Type",
        aesOption: "AES (Symmetric)",
        sha256Option: "SHA-256 (Hash)",
        hybridOption: "Hybrid (RSA + AES)",
        generateRSAKeysBtn: "Generate RSA Key Pair",
        publicKeyLabel: "Public Key",
        privateKeyLabel: "Private Key",
        encryptionKeyLabel: "Encryption Key",
        encryptBtn: "Encrypt",
        decryptBtn: "Decrypt",
        analyzerTitle: "🔍 Password Strength Analyzer",
        analyzerInputLabel: "Enter Password for Analysis",
        timeUnitLabel: "Time Unit:",
        yearsOption: "Years",
        monthsOption: "Months",
        daysOption: "Days",
        calculating: "Calculating...",
        complexityInfo: "This estimate uses realistic cracking methods.",
        passwordStrengthLabel: "Password Strength:",
        historyTitle: "Operation History",
        clearHistoryBtn: "Clear History",
        cyberMapTitle: "Real-Time Attack Map"
      }
    };

    function updateTranslations(lang) {
      document.querySelectorAll("[data-i18n]").forEach(el => {
        const key = el.getAttribute("data-i18n");
        if (translations[lang] && translations[lang][key]) {
          el.innerHTML = translations[lang][key];
        }
      });
      document.querySelectorAll("[data-i18n-title]").forEach(el => {
        const key = el.getAttribute("data-i18n-title");
        if (translations[lang] && translations[lang][key]) {
          el.title = translations[lang][key];
        }
      });
      // Placeholders
      const textToEncrypt = document.getElementById("text-to-encrypt");
      const encryptionKey = document.getElementById("encryption-key");
      const passwordInput = document.getElementById("password-input");
      if (textToEncrypt) {
        textToEncrypt.placeholder = (lang === "pt")
          ? "Digite o texto para encriptar/desencriptar"
          : "Enter text to encrypt/decrypt";
      }
      if (encryptionKey) {
        encryptionKey.placeholder = (lang === "pt")
          ? "Digite a chave secreta"
          : "Enter secret key";
      }
      if (passwordInput) {
        passwordInput.placeholder = (lang === "pt")
          ? "Digite sua senha"
          : "Enter your password";
      }
    }

    /************************************************************
     *               DARK / LIGHT MODE TOGGLE                  *
     ************************************************************/
    function toggleTheme() {
      const body = document.getElementById('body');
      if (body.classList.contains('light-mode')) {
        body.classList.remove('light-mode');
        localStorage.setItem('theme','dark');
        document.getElementById('darkmodebtn').innerHTML = "🌙";
      } else {
        body.classList.add('light-mode');
        localStorage.setItem('theme','light');
        document.getElementById('darkmodebtn').innerHTML = "☀";
      }
    }

    /************************************************************
     *               CYBERWATCH - ATUALIZA ESTATÍSTICAS         *
     ************************************************************/
    function updateCyberWatchStats() {
      const attacks = document.getElementById('active-attacks');
      const lastUpdate = document.getElementById('last-update');
      if (!attacks || !lastUpdate) return;
      const newValue = Math.floor(Math.random() * (400 - 300) + 300);
      attacks.textContent = newValue;
      lastUpdate.textContent = `${Math.floor(Math.random() * 60)}s`;
    }

    /************************************************************
     *               GERADOR DE SENHAS                          *
     ************************************************************/
    function getPasswordConfig() {
      return {
        length: parseInt(document.getElementById('length').value) || 12,
        includeLowercase: document.getElementById('include-lowercase').checked,
        includeUppercase: document.getElementById('include-uppercase').checked,
        includeNumbers:   document.getElementById('include-numbers').checked,
        includeSymbols:   document.getElementById('include-symbols').checked
      };
    }
    function generateCharPool(cfg) {
      const pools = {
        lowercase: 'abcdefghijklmnopqrstuvwxyz',
        uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
        numbers:   '0123456789',
        symbols:   '!@#$%^&*()_+[]{}|;:,.<>?'
      };
      let pool = '';
      if (cfg.includeLowercase) pool += pools.lowercase;
      if (cfg.includeUppercase) pool += pools.uppercase;
      if (cfg.includeNumbers)   pool += pools.numbers;
      if (cfg.includeSymbols)   pool += pools.symbols;
      return pool;
    }
    function createPassword(length, pool) {
      let password = '';
      for (let i = 0; i < length; i++) {
        password += pool[Math.floor(Math.random() * pool.length)];
      }
      return password;
    }
    function generatePassword() {
      const config = getPasswordConfig();
      const pool = generateCharPool(config);
      if (!pool) {
        showAlert('Selecione ao menos um tipo de caractere!', 'error');
        return;
      }
      const password = createPassword(config.length, pool);
      document.getElementById('generated-password').value = password;
      addToHistory('Senha gerada: ' + password);
      // Opcional: atualizar barra de força se estiver analisando
      updateStrengthBar();
    }
    function copyContent(field) {
      navigator.clipboard.writeText(field.value)
        .then(() => showAlert("Texto copiado!", "success"))
        .catch(() => showAlert("Erro ao copiar texto.", "error"));
    }

    /************************************************************
     *               CRIPTOGRAFIA / DESCRIPTOGRAFIA             *
     ************************************************************/
    function getEncryptionInputs() {
      return {
        text: document.getElementById('text-to-encrypt').value.trim(),
        key: document.getElementById('encryption-key').value.trim(),
        type: document.getElementById('encryption-type').value
      };
    }
    function validateEncryptionInputs(text, key, type) {
      if (!text) {
        showAlert('Preencha o campo de texto!', 'error');
        return false;
      }
      if ((type === 'aes' || type === 'hybrid') && !key) {
        showAlert('Preencha a chave de segurança!', 'error');
        return false;
      }
      if (type === 'hybrid' &&
          (!document.getElementById('rsa-public-key').value ||
           !document.getElementById('rsa-private-key').value)) {
        showAlert('É necessário gerar as chaves RSA para o modo Hybrid!', 'error');
        return false;
      }
      return true;
    }
    async function handleEncryption() {
      const { text, key, type } = getEncryptionInputs();
      if (!validateEncryptionInputs(text, key, type)) return;
      try {
        let result;
        if (type === 'aes') {
          result = await encryptAES(text, key);
        } else if (type === 'sha256') {
          result = await hashSHA256(text);
        } else if (type === 'hybrid') {
          result = await encryptHybrid(text, key);
        }
        document.getElementById('encrypted-decrypted-text').value = result;
        addToHistory('Texto encriptado: ' + result);
        showAlert('Operação realizada com sucesso!', 'success');
      } catch (err) {
        showAlert('Erro: ' + err.message, 'error');
      }
    }
    async function handleDecryption() {
      const { text, key, type } = getEncryptionInputs();
      if (type === 'sha256') {
        showAlert('SHA-256 é um hash unidirecional e não pode ser desencriptado!', 'error');
        return;
      }
      if (!validateEncryptionInputs(text, key, type)) return;
      try {
        let result;
        if (type === 'aes') {
          result = await decryptAES(text, key);
        } else if (type === 'hybrid') {
          result = await decryptHybrid(text, key);
        }
        document.getElementById('encrypted-decrypted-text').value = result;
        addToHistory('Texto desencriptado: ' + result);
        showAlert('Operação realizada com sucesso!', 'success');
      } catch (err) {
        showAlert('Erro: ' + err.message, 'error');
      }
    }

    /************************************************************
     *               FUNÇÕES DE CRIPTO (AES, RSA)               *
     ************************************************************/
    function arrayBufferToBase64(buffer) {
      return btoa(String.fromCharCode(...new Uint8Array(buffer)));
    }
    function base64ToBuffer(base64) {
      const binaryString = atob(base64);
      const len = binaryString.length;
      const bytes = new Uint8Array(len);
      for (let i = 0; i < len; i++) {
        bytes[i] = binaryString.charCodeAt(i);
      }
      return bytes;
    }
    async function encryptAES(plainText, password) {
      const salt = crypto.getRandomValues(new Uint8Array(16));
      const iv   = crypto.getRandomValues(new Uint8Array(12));
      const keyMaterial = await crypto.subtle.importKey('raw', new TextEncoder().encode(password), 'PBKDF2', false, ['deriveKey']);
      const key = await crypto.subtle.deriveKey(
        { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
        keyMaterial,
        { name: 'AES-GCM', length: 256 },
        true,
        ['encrypt','decrypt']
      );
      const encrypted = await crypto.subtle.encrypt({ name: 'AES-GCM', iv }, key, new TextEncoder().encode(plainText));
      const combined = new Uint8Array([...salt, ...iv, ...new Uint8Array(encrypted)]);
      return arrayBufferToBase64(combined);
    }
    async function decryptAES(encryptedBase64, password) {
      const data = base64ToBuffer(encryptedBase64);
      const salt = data.slice(0,16);
      const iv   = data.slice(16,28);
      const ciphertext = data.slice(28);
      const keyMaterial = await crypto.subtle.importKey('raw', new TextEncoder().encode(password), 'PBKDF2', false, ['deriveKey']);
      const key = await crypto.subtle.deriveKey(
        { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
        keyMaterial,
        { name: 'AES-GCM', length: 256 },
        true,
        ['decrypt']
      );
      const decrypted = await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext);
      return new TextDecoder().decode(decrypted);
    }
    async function hashSHA256(plainText) {
      const hash = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(plainText));
      return arrayBufferToBase64(hash);
    }

    /************************************************************
     *                        HYBRID (AES + RSA)                *
     ************************************************************/
    async function encryptHybrid(plainText, aesKey) {
      const aesEncrypted = await encryptAES(plainText, aesKey);
      const publicKeyValue = document.getElementById('rsa-public-key').value;
      if (!publicKeyValue) throw new Error('Chave pública RSA não encontrada.');
      return await encryptRSA(aesEncrypted, publicKeyValue);
    }
    async function decryptHybrid(cipherText, aesKey) {
      const privateKeyValue = document.getElementById('rsa-private-key').value;
      if (!privateKeyValue) throw new Error('Chave privada RSA não encontrada.');
      const rsaDecrypted = await decryptRSA(cipherText, privateKeyValue);
      return await decryptAES(rsaDecrypted, aesKey);
    }

    /************************************************************
     *                       RSA KEYS                           *
     ************************************************************/
    async function generateRSAKeys() {
      try {
        const keyPair = await crypto.subtle.generateKey(
          {
            name: "RSA-OAEP",
            modulusLength: 2048,
            publicExponent: new Uint8Array([1,0,1]),
            hash: "SHA-256"
          },
          true,
          ["encrypt","decrypt"]
        );
        const publicKey = await exportKey(keyPair.publicKey, 'spki');
        const privateKey = await exportKey(keyPair.privateKey, 'pkcs8');
        document.getElementById('rsa-public-key').value = publicKey;
        document.getElementById('rsa-private-key').value = privateKey;
        showAlert('Chaves RSA geradas com sucesso!', 'success');
      } catch (err) {
        showAlert('Erro ao gerar chaves RSA: ' + err.message, 'error');
      }
    }
    async function exportKey(key, format) {
      const exported = await crypto.subtle.exportKey(format, key);
      return arrayBufferToBase64(exported);
    }
    async function importRSAPublicKey(spkiBase64) {
      const binaryDer = base64ToBuffer(spkiBase64);
      return crypto.subtle.importKey(
        'spki',
        binaryDer,
        { name: 'RSA-OAEP', hash: 'SHA-256' },
        true,
        ['encrypt']
      );
    }
    async function importRSAPrivateKey(pkcs8Base64) {
      const binaryDer = base64ToBuffer(pkcs8Base64);
      return crypto.subtle.importKey(
        'pkcs8',
        binaryDer,
        { name: 'RSA-OAEP', hash: 'SHA-256' },
        true,
        ['decrypt']
      );
    }
    async function encryptRSA(plainTextBase64, publicKeyValue) {
      const key = await importRSAPublicKey(publicKeyValue);
      const encrypted = await crypto.subtle.encrypt(
        { name: 'RSA-OAEP' },
        key,
        new TextEncoder().encode(plainTextBase64)
      );
      return arrayBufferToBase64(encrypted);
    }
    async function decryptRSA(cipherBase64, privateKeyValue) {
      const key = await importRSAPrivateKey(privateKeyValue);
      const decrypted = await crypto.subtle.decrypt(
        { name: 'RSA-OAEP' },
        key,
        base64ToBuffer(cipherBase64)
      );
      return new TextDecoder().decode(decrypted);
    }

    /************************************************************
     *         ANÁLISE DE FORÇA DE SENHA (ZXCVBN)               *
     ************************************************************/
    function convertSeconds(seconds, unit) {
      if (unit === "years") {
        return seconds / (3600 * 24 * 365);
      } else if (unit === "months") {
        return seconds / (3600 * 24 * 30);
      } else if (unit === "days") {
        return seconds / (3600 * 24);
      }
      return seconds;
    }
    function updateTimeDisplay() {
      const password = document.getElementById('password-input').value;
      const unit = document.getElementById('time-unit').value;
      const timeEstimate = document.getElementById('time-estimate-analyzer');
      if (!password) {
        timeEstimate.textContent = 'Tempo estimado para quebrar sua senha: 0 ' + unit;
        return;
      }
      const result = zxcvbn(password);
      const seconds = result.crack_times_seconds.offline_slow_hashing_1e4_per_second ||
                      result.crack_times_seconds.offline_fast_hashing_1e10_per_second ||
                      0;
      const converted = convertSeconds(seconds, unit);
      timeEstimate.textContent = 'Tempo estimado para quebrar sua senha: ' + converted.toFixed(2) + ' ' + unit;
    }
    function updateStrengthBar() {
      const password = document.getElementById('password-input').value;
      const bar = document.getElementById('strength-bar');
      const strengthLabel = document.getElementById('strength-label');
      if (!bar || !strengthLabel) return;
      if (!password) {
        bar.style.width = "0%";
        strengthLabel.textContent = "";
        return;
      }
      const result = zxcvbn(password);
      const percentage = (result.score + 1) * 20;
      bar.style.width = percentage + "%";
      switch(result.score) {
        case 0: strengthLabel.textContent = "Muito Fraca"; break;
        case 1: strengthLabel.textContent = "Fraca"; break;
        case 2: strengthLabel.textContent = "Razoável"; break;
        case 3: strengthLabel.textContent = "Forte"; break;
        case 4: strengthLabel.textContent = "Muito Forte"; break;
      }
    }

    /************************************************************
     *                   HISTÓRICO DO TOOLKIT                   *
     ************************************************************/
    function addToHistory(text) {
      const historyContainer = document.getElementById('history-container');
      const div = document.createElement('div');
      div.textContent = text;
      historyContainer.appendChild(div);
    }
    function clearHistory() {
      const historyContainer = document.getElementById('history-container');
      const lang = document.getElementById('language-selector').value;
      historyContainer.innerHTML = `
        <h2 data-i18n="historyTitle">${
          lang === 'en' 
          ? "Operation History"
          : "Histórico de Operações"
        }</h2>
        <button class="btn-secondary" id="clear-history-btn" data-i18n="clearHistoryBtn">${
          lang === 'en' 
          ? "Clear History"
          : "Limpar Histórico"
        }</button>
      `;
      document.getElementById('clear-history-btn').addEventListener('click', clearHistory);
    }

    /************************************************************
     *                         ALERTAS                          *
     ************************************************************/
    function showAlert(message, type) {
      const alertContainer = document.getElementById('alert-container');
      const alertDiv = document.createElement('div');
      alertDiv.textContent = message;
      alertDiv.className = `alert ${type}`;
      alertContainer.appendChild(alertDiv);
      setTimeout(() => {
        if (alertDiv) alertDiv.remove();
      }, 3000);
    }

    /************************************************************
     *                      DOMContentLoaded                    *
     ************************************************************/
    document.addEventListener('DOMContentLoaded', () => {
      // Carregar tema salvo
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'light') {
        document.getElementById('body').classList.add('light-mode');
        document.getElementById('darkmodebtn').innerHTML = "☀";
      } else {
        document.getElementById('darkmodebtn').innerHTML = "🌙";
      }

      // Carregar idioma salvo
      const savedLang = localStorage.getItem('language') || 'pt';
      document.getElementById('language-selector').value = savedLang;
      updateTranslations(savedLang);

      // Eventos do Nav
      document.getElementById('darkmodebtn').addEventListener('click', toggleTheme);
      document.getElementById('language-selector').addEventListener('change', (e) => {
        const lang = e.target.value;
        localStorage.setItem('language', lang);
        updateTranslations(lang);
        showAlert(lang === 'pt' ? 'Idioma alterado para Português.' : 'Language changed to English.', 'success');
      });

      // CyberWatch (atualização periódica)
      setInterval(updateCyberWatchStats, 5000);

      // Gerador de Senhas
      document.getElementById('generate-btn').addEventListener('click', generatePassword);
      document.getElementById('copy-btn').addEventListener('click', () => copyContent(document.getElementById('generated-password')));
      document.getElementById('clear-password-btn').addEventListener('click', () => {
        document.getElementById('generated-password').value = '';
      });

      // Criptografia
      document.getElementById('encrypt-btn').addEventListener('click', handleEncryption);
      document.getElementById('decrypt-btn').addEventListener('click', handleDecryption);
      document.getElementById('copy-encrypted-btn').addEventListener('click', () => copyContent(document.getElementById('encrypted-decrypted-text')));
      document.getElementById('clear-crypto-btn').addEventListener('click', () => {
        ['text-to-encrypt','encryption-key','encrypted-decrypted-text'].forEach(id => {
          const el = document.getElementById(id);
          if (el) el.value = '';
        });
      });
      document.getElementById('encryption-type').addEventListener('change', (e) => {
        const type = e.target.value;
        const keyInputGroup = document.getElementById('key-input-group');
        const decryptBtn = document.getElementById('decrypt-btn');
        const rsaSection = document.getElementById('rsa-keys-section');
        if (type === 'sha256') {
          keyInputGroup.style.display = 'none';
          decryptBtn.style.display = 'none';
        } else {
          keyInputGroup.style.display = 'block';
          decryptBtn.style.display = 'inline-block';
        }
        rsaSection.style.display = (type === 'hybrid') ? 'block' : 'none';
      });
      document.getElementById('generate-rsa-keys').addEventListener('click', generateRSAKeys);

      // Analisador de Força
      document.getElementById('password-input').addEventListener('input', () => {
        updateStrengthBar();
        updateTimeDisplay();
      });
      document.getElementById('time-unit').addEventListener('change', updateTimeDisplay);
      document.getElementById('clear-analyzer-btn').addEventListener('click', () => {
        document.getElementById('password-input').value = '';
        updateStrengthBar();
        updateTimeDisplay();
      });

      // Histórico
      document.getElementById('clear-history-btn').addEventListener('click', clearHistory);
    });
  </script>
</body>
</html>
